!function(B){function v(b){b.touches||(b.touches=b.originalEvent.touches)}function u(d,c){c._startY=d.touches[0].pageY,c.touchScrollTop=c.$scrollArea.scrollTop()}function t(a,f){f._curY=a.touches[0].pageY,f._moveY=f._curY-f._startY,f._moveY>0?f.direction="down":f._moveY<0&&(f.direction="up");var e=Math.abs(f._moveY);""!=f.opts.loadUpFn&&f.touchScrollTop<=0&&"down"==f.direction&&!f.isLockUp&&(a.preventDefault(),f.$domUp=B("."+f.opts.domUp.domClass),f.upInsertDOM||(f.$element.prepend('<div class="'+f.opts.domUp.domClass+'"></div>'),f.upInsertDOM=!0),o(f.$domUp,0),e<=f.opts.distance?(f._offsetY=e,f.$domUp.html(f.opts.domUp.domRefresh)):e>f.opts.distance&&e<=2*f.opts.distance?(f._offsetY=f.opts.distance+0.5*(e-f.opts.distance),f.$domUp.html(f.opts.domUp.domUpdate)):f._offsetY=f.opts.distance+0.5*f.opts.distance+0.2*(e-2*f.opts.distance),f.$domUp.css({height:f._offsetY}))}function s(a){var d=Math.abs(a._moveY);""!=a.opts.loadUpFn&&a.touchScrollTop<=0&&"down"==a.direction&&!a.isLockUp&&(o(a.$domUp,300),d>a.opts.distance?(a.$domUp.css({height:a.$domUp.children().height()}),a.$domUp.html(a.opts.domUp.domLoad),a.loading=!0,a.opts.loadUpFn(a)):a.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){a.upInsertDOM=!1,B(this).remove()}),a._moveY=0)}function r(b){b.opts.autoLoad&&b._scrollContentHeight-b._threshold<=b._scrollWindowHeight&&p(b)}function q(b){b._scrollContentHeight=b.opts.scrollArea==A?x.height():b.$element[0].scrollHeight}function p(b){b.direction="up",b.$domDown.html(b.opts.domDown.domLoad),b.loading=!0,b.opts.loadDownFn(b)}function o(d,c){d.css({"-webkit-transition":"all "+c+"ms",transition:"all "+c+"ms"})}var w,A=window,z=document,y=B(A),x=B(z);B.fn.dropload=function(b){return new w(this,b)},w=function(e,d){var f=this;f.$element=e,f.upInsertDOM=!1,f.loading=!1,f.isLockUp=!1,f.isLockDown=!1,f.isData=!0,f._scrollTop=0,f._threshold=0,f.init(d)},w.prototype.init=function(b){var a=this;a.opts=B.extend(!0,{},{scrollArea:a.$element,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh">↓下拉刷新</div>',domUpdate:'<div class="dropload-update">↑释放更新</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domLoad:'<div class="dropload-load" style="overflow:hidden;><span class="loading"></span>加载中...</div>',domNoData:'<div class="dropload-noData" style="padding-top:120px;width:190px;margin:0 auto;"><img style="width:60px;display:block;margin:0 auto;" src="../addons/sz_yi/plugin/suppliermenu/template/mobile/default/images/order.png" alt=""><span style="display:block;margin-top: 18px; text-align:center;">您还没有相关订单</br>可以去看看有没有喜欢的商品</span></br></div>',domNoDataCopy:'<div class="dropload-noData" style="padding-top:120px;width:190px;margin:0 auto;"><img style="width:60px;display:block;margin:0 auto;" src="../addons/sz_yi/plugin/suppliermenu/template/mobile/default/images/gsmg.png" alt=""><span style="display:block;margin-top: 18px; text-align:center;">您目前没有可以出售的宝贝</br></div>'},autoLoad:!0,distance:50,threshold:"",loadUpFn:"",loadDownFn:""},b),""!=a.opts.loadDownFn&&(a.$element.append('<div class="'+a.opts.domDown.domClass+'">'+a.opts.domDown.domRefresh+"</div>"),a.$domDown=B("."+a.opts.domDown.domClass)),a._threshold=a.$domDown&&""===a.opts.threshold?Math.floor(1*a.$domDown.height()/3):a.opts.threshold,a.opts.scrollArea==A?(a.$scrollArea=y,a._scrollContentHeight=x.height(),a._scrollWindowHeight=z.documentElement.clientHeight):(a.$scrollArea=a.opts.scrollArea,a._scrollContentHeight=a.$element[0].scrollHeight,a._scrollWindowHeight=a.$element.height()),r(a),y.on("resize",function(){a._scrollWindowHeight=a.opts.scrollArea==A?A.innerHeight:a.$element.height()}),a.$element.on("touchstart",function(c){a.loading||(v(c),u(c,a))}),a.$element.on("touchmove",function(c){a.loading||(v(c,a),t(c,a))}),a.$element.on("touchend",function(){a.loading||s(a)}),a.$scrollArea.on("scroll",function(){a._scrollTop=a.$scrollArea.scrollTop(),""!=a.opts.loadDownFn&&!a.loading&&!a.isLockDown&&a._scrollContentHeight-a._threshold<=a._scrollWindowHeight+a._scrollTop&&p(a)})},w.prototype.lock=function(d){var c=this;void 0===d?"up"==c.direction?c.isLockDown=!0:"down"==c.direction?c.isLockUp=!0:(c.isLockUp=!0,c.isLockDown=!0):"up"==d?c.isLockUp=!0:"down"==d&&(c.isLockDown=!0,c.direction="up")},w.prototype.unlock=function(){var b=this;b.isLockUp=!1,b.isLockDown=!1,b.direction="up"},w.prototype.noData=function(d){var c=this;void 0===d||1==d?c.isData=!1:0==d&&(c.isData=!0)},w.prototype.resetload=function(){var a=this;"down"==a.direction&&a.upInsertDOM?a.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){a.loading=!1,a.upInsertDOM=!1,B(this).remove(),q(a)}):"up"==a.direction&&(a.loading=!1,a.isData?(a.$domDown.html(a.opts.domDown.domRefresh),q(a),r(a)):a.$domDown.html(a.opts.domDown.domNoData))},w.prototype.resetCp=function(){var a=this;"down"==a.direction&&a.upInsertDOM?a.$domUp.css({height:"0"}).on("webkitTransitionEnd mozTransitionEnd transitionend",function(){a.loading=!1,a.upInsertDOM=!1,B(this).remove(),q(a)}):"up"==a.direction&&(a.loading=!1,a.isData?(a.$domDown.html(a.opts.domDown.domRefresh),q(a),r(a)):a.$domDown.html(a.opts.domDown.domNoDataCopy))}}(window.Zepto||window.jQuery);